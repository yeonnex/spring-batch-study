# StepBuilderFactory

- **StepBuilder ë¥¼ ìƒì„±**í•˜ëŠ” íŒ©í† ë¦¬ í´ë˜ìŠ¤ë¡œì„œ get(String name) ë©”ì„œë“œ ì œê³µ
- StepBuilderFactory.get("stepName")
    - "stepName" ìœ¼ë¡œ ìŠ¤í… ìƒì„±

# StepBuilder

- ìŠ¤í…ì„ êµ¬ì„±í•˜ëŠ” ì„¤ì • ì¡°ê±´ì— ë”°ë¼ ë‹¤ì„¯ ê°œì˜ í•˜ìœ„ ë¹Œë” í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì‹¤ì œ ìŠ¤í… ìƒì„±ì„ ìœ„ì„í•œë‹¤.
    - ìŠ¤í… ë¹Œë” íŒ©í† ë¦¬ë‚˜, ìŠ¤í… ë¹Œë”ê°€ ì‹¤ì œ ìŠ¤í…ì„ ìƒì„±í•˜ì§€ ì•ŠëŠ”ë‹¤.
    - ì‹¤ì œ ìŠ¤í…ì„ ìƒì„±í•˜ëŠ” ê²ƒì€ ìŠ¤í… ë¹Œë”ì˜ í•˜ìœ„ ë¹Œë” í´ë˜ìŠ¤ë“¤ì´ ê·¸ ì—­í• ì„ í•œë‹¤.
-
    1. TaskletStepBuilder (`.tasklet`)

    - TaskletStep ì„ ìƒì„±í•˜ëŠ” ê¸°ë³¸ ë¹Œë” í´ë˜ìŠ¤
-
    2. SimpleStepBuilder (`.chunk`)

    - TaskletStep ì„ ìƒì„±í•˜ë©° ë‚´ë¶€ì ìœ¼ë¡œ ì²­í¬ ê¸°ë°˜ì˜ ì‘ì—…ì„ ì§€ì›í•˜ëŠ” ChunkOrientedTasklet í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤
> TaskletStepBuilder ì™€ ChunkStepBuilder ëª¨ë‘ TaskletStep ì„ ìƒì„±í•œë‹¤.
> ì°¨ì´ì ì€ SimpleStepBuilder ê°€ ì²­í¬ ê¸°ë°˜ì˜ ì‘ì—…ì„ ì§€ì›í•˜ëŠ” ChunkOrientedTasklet ì„ ìƒì„±í•œë‹¤ëŠ” ì ì´ë‹¤.
-
    3. PartitionStepBuilder (`.partioner`)

    - PartitionStep ì„ ìƒì„±í•˜ë©° ë©€í‹° ìŠ¤ë ˆë“œ ë°©ì‹ìœ¼ë¡œ ì¡ì„ ì‹¤í–‰í•œë‹¤
-
    4. JobStepBuilder (`.job`)

    - JobStep ì„ ìƒì„±í•˜ë©° ìŠ¤í… ì•ˆì—ì„œ ì¡ì„ ì‹¤í–‰í•œë‹¤
-
    5. FlowStepBuilder (`.flow`)

    - FlowStep ì„ ìƒì„±í•˜ì—¬ ìŠ¤í… ì•ˆì—ì„œ í”Œë¡œìš°ë¥¼ ì‹¤í–‰í•œë‹¤

# TaskletStep - ê°œë… ë° API ì†Œê°œ

- ìŠ¤í”„ë§ë°°ì¹˜ì—ì„œ ì œê³µí•˜ëŠ” Step ì˜ êµ¬í˜„ì²´ë¡œì„œ Tasklet ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ë„ë©”ì¸ ê°ì²´
- RepeatTemplate ì„ ì‚¬ìš©í•´ Tasklet ì˜ êµ¬ë¬¸ì„ íŠ¸ëœì­ì…˜ ê²½ê³„ ë‚´ì—ì„œ ë°˜ë³µí•´ì„œ ì‹¤í–‰
- Task ê¸°ë°˜ê³¼ Chunk ê¸°ë°˜ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì„œ Tasklet ì„ ì‹¤í–‰í•¨

> Task vs Chunk ë¹„êµ
> - ìŠ¤í”„ë§ ë°°ì¹˜ì—ì„œ ìŠ¤í…ì˜ ì‹¤í–‰ ë‹¨ìœ„ëŠ” í¬ê²Œ ë‘ê°€ì§€ë¡œ ë‚˜ë‰˜ì–´ì§„ë‹¤
    >
-
1. ì²­í¬ ê¸°ë°˜
>
- í•˜ë‚˜ì˜ í° ë©ì–´ë¦¬ë¥¼ n ê°œì”© ë‚˜ëˆ„ì–´ ì‹¤í–‰í•œë‹¤ëŠ” ì˜ë¯¸ë¡œ, ëŒ€ëŸ‰ì²˜ë¦¬ë¥¼ ìœ„í•´ íš¨ê³¼ì ìœ¼ë¡œ ì„¤ê³„ë¨
>     - ItemReader, ItemProcessor, ItemWriter ë¥¼ ì‚¬ìš©í•˜ë©° ì²­í¬ ê¸°ë°˜ ì „ìš© Tasklet ì¸ ChunkOrientedTasklet êµ¬í˜„ì²´ê°€ ì œê³µëœë‹¤
>   -
2. íƒœìŠ¤í¬ ê¸°ë°˜
>
- ItemReader, ItemWriter ì™€ ê°™ì€ ì²­í¬ ê¸°ë°˜ ì‘ì–´ë´…ë‹¤, **ë‹¨ì¼ ì‘ì—…** ê¸°ë°˜ìœ¼ë¡œ ì²˜ë¦¬ë˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì ì¸ ê²½ìš°
>     - ì£¼ë¡œ Tasklet ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©

    >  ![img_5.png](img_5.png)

```java
ğŸ’¡ íƒœìŠ¤í¬ë¦¿ ìŠ¤í…ì´ë˜,ì²­í¬ ê¸°ë°˜ ìŠ¤í…ì´ë˜ íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ ìˆ˜í–‰ëœë‹¤.ê·¸ë˜ì„œ DB ì™€ì˜ ì—°ë™ì„ í†µí•œ ì‘ì—… ì²˜ë¦¬ ì‹œ
        ì»¤ë°‹ê³¼ ë¡¤ë°± ë“±ì˜ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ê°€ ì´ë¯¸ ìŠ¤í”„ë§ë°°ì¹˜ ë‚´ë¶€ì ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆë‹¤.ë³„ë„ì˜ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ë¥¼ ìœ„í•œ êµ¬ë¬¸ ì‘ì„±ì´ í•„ìš”ì—†ë‹¤!
```

## TaskletStep ê°ì²´ê°€ ìƒì„±ë˜ê¸°ê¹Œì§€...

> **StepBuilderFactory** â¡ï¸ **StepBuilder** â¡ï¸ **TaskletStepBuilder** â¡ï¸ **TaskletStep**

```java
Step step1(){
        return stepBuiderFactory.get("step1") // StepBuilder ë¥¼ ìƒì„±í•˜ëŠ” íŒ©í† ë¦¬. ìŠ¤í… ì´ë¦„ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ìŒ
        .tasklet(myTasklet())           // ì´ ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ë©´ TaskletStepBuilder ë°˜í™˜
        .startLimit(10)                 // ìŠ¤í…ì˜ ì‹¤í–‰ íšŸìˆ˜ë¥¼ ì„¤ì •. ì„¤ì •í•œ ë§Œí¼ ì‹¤í–‰ë˜ê³  ì´ˆê³¼ì‹œ ìµì…‰ì…˜. ê¸°ë³¸ê°’ì€ INTEGER.MAX_VALUE
        .allowStartIfComplete(true)     // ì¡ ì‹¤íŒ¨ í›„ ì¬ ì‹œë„ì‹œ, ì´ë¯¸ ì„±ê³µí•œ ìŠ¤í…ì€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ” ê²ƒì´ ê¸°ë³¸. ê·¸ëŸ¬ë‚˜ ì´ API ë¡œ true ê°’ì„ ì£¼ë©´ ì„±ê³µí•œ ìŠ¤í…ì´ë¼ í• ì§€ë¼ë„ ì¬ì‹¤í–‰ë¨
        .listener(listener())           // ìŠ¤í… ë¼ì´í”„ ì‚¬ì´í´ì˜ íŠ¹ì • ì‹œì ì— ì½œë°±ì„ ì œê³µë°›ë„ë¡ ë¦¬ìŠ¤ë„ˆë¥¼ ì„¤ì •
        .build();                       // TaskletStep ì„ ìƒì„±
        }
```

### Task ê¸°ë°˜ìœ¼ë¡œ TaskletStep ìƒì„±

```java
Step step1(){
        return stepBuilderFactory.get("step1")
        .tasklet(myTasklet())
        .build();
        }
```

### Chunk ê¸°ë°˜ìœ¼ë¡œ TaskletStep ìƒì„±

```java
Step step1(){
        return stepBuilderFactory().get("step2")
        .<String, String>chunk(100)
        .reader().writer().build();
        }
```

![img_6.png](img_6.png)


